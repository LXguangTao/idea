
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta charset="UTF-8">
    <title>欢迎页面-X-admin2.0</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="~/css/font.css">
    <link rel="stylesheet" href="~/css/xadmin.css">
    <script src="~/ueditor/ueditor.config.js"></script>
    <script src="~/ueditor/ueditor.all.min.js"></script>
    <script src="~/scripts/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="~/lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="~/js/xadmin.js"></script>

    <!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
    <!--[if lt IE 9]>
      <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
      <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    <div style="width:1100px;margin:30px auto">
        <h1>添加情报</h1>
        <form class="layui-form" id="forms">
            <div class="layui-form-item">
                <label class="layui-form-label"><span class="x-red">*</span>标题</label>
                <div class="layui-input-inline">
                    <input type="text" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input" name="title" value="" />
                </div>
                <label class="layui-form-label">副标题</label>
                <div class="layui-input-inline">
                    <input type="text" placeholder="请输入副标题" autocomplete="off" class="layui-input" name="subhead" value="" />
                </div>
                <label class="layui-form-label">传送门</label>
                <div class="layui-input-inline">
                    <input type="text" placeholder="请输入传送门" autocomplete="off" class="layui-input" name="arbitrary" value="" />
                </div>
            </div>
            <div class="layui-upload" id="MainPics">
                <label class="layui-form-label"><span class="x-red">*</span>主图</label>
                <input type="text" id="ImgUrl" name="MainPic" style="display:none" lay-verify="required" placeholder="请上传图片" autocomplete="off" class="layui-input" value="" />
                <div class="layui-input-inline">
                    <img id="demo1" src="" class="layui-upload-img" style="width:320px; height:213px" />
                    <button type="button" class="layui-btn " id="UploadImg">
                        <i class="layui-icon">&#xe67c;</i>上传图片
                    </button>
                </div>
            </div>
            <div class="layui-form-item" style="margin-top:15px">
                <label class="layui-form-label">导言</label>
                <div class="layui-input-block" style="height:300px;width:720px">
                    <textarea id="content1" name="daoyan" style="height:300px"></textarea>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">CoverStory</label>
                <div class="layui-input-block" style="height:200px;width:720px">
                    <textarea id="content2" name="coverstory" style="height:200px"></textarea>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">编辑部情报</label>
                <div class="layui-input-block" style="height:200px;width:720px">
                    <textarea id="content3" name="dinting" style="height:200px"></textarea>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">来点零食吧</label>
                <div class="layui-input-block" style="height:200px;width:720px">
                    <textarea id="content4" name="snakes" style="height:200px"></textarea>
                </div>
            </div>
            <div class="layui-form-item" style="margin-top:200px">
                <div class="layui-input-block" style="width:100px;margin:10px auto">
                    <button type="button" class="layui-btn" style="background-color:#009688" lay-submit lay-filter="add">添加</button>
                </div>
            </div>
        </form>
    </div>
    <script type="text/javascript" charset="utf-8">
        var editor = new baidu.editor.ui.Editor();
        var editor1 = new baidu.editor.ui.Editor();
        var editor2 = new baidu.editor.ui.Editor();
        var editor3 = new baidu.editor.ui.Editor();
        editor.render('content1');
        editor1.render('content2');
        editor2.render('content3');
        editor3.render('content4');
        layui.use(['form', 'layer','layedit','upload'], function () {
            var form = layui.form, layer = layui.layer, layedit = layui.layedit, upload = layui.upload;
            upload.render({
                elem: '#UploadImg',
                url: '/back/Advice/UploadPhoto',
                done: function (res, index, upload) {
                    var item = this.item;
                    if (res.success) {
                        $("#ImgUrl").val(res.remark);
                        $("#demo1").attr("src", "/" + res.remark);
                        layer.msg("上传成功");
                    }
                    else
                        layer.msg("上传失败:" + res.message);
                }
            });
            form.on("submit(add)", function () {
                layer.confirm("是否确认添加", function (index) {
                    $.post("/back/Advice/AddAds", $("#forms").serialize(), function (res) {
                        if (res.success) {
                            layer.msg("添加成功", { icon: 1, time: 2000 });
                        } else {
                            layer.msg("添加失败："+res.message, {icon:2,time:2000});
                        }
                    }, "json");
                });
            });
        });
    </script>
</body>
</html>
